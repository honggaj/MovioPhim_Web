<div class="flex items-center gap-2 w-full mx-auto mb-6">
  <input
    type="text"
    [(ngModel)]="keyword"
    placeholder="Tìm kiếm phim..."
    class="border-none bg-[#2e2e2e] text-white placeholder-gray-400 px-4 py-2 rounded flex-1 focus:outline-none focus:ring-1 focus:ring-red-900"
  />
  <button
    (click)="onSearch()"
    class="bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded whitespace-nowrap"
  >
    Tìm
  </button>
</div>

<!-- Skeleton loading -->
<div *ngIf="isLoading" class="grid grid-cols-2 md:grid-cols-5 lg:grid-cols-7 gap-4 p-4 bg-black text-white">
  <div *ngFor="let s of [1,2,3,4,5,6,7,8]" class="p-2 bg-zinc-800 rounded animate-pulse">
    <div class="w-full h-40 bg-zinc-700 rounded mb-2"></div>
    <div class="h-4 bg-zinc-700 rounded mb-1"></div>
    <div class="h-3 bg-zinc-600 rounded w-2/3"></div>
  </div>
</div>

<ng-container *ngIf="!isLoading && results.length > 0; else noResult">
  <div class="p-4 bg-black text-white h-full">
    <h2 class="mb-4">Các phim liên quan...</h2>
    <div class="grid grid-cols-2 md:grid-cols-5 lg:grid-cols-7 gap-4">
      <div *ngFor="let movie of results | slice:0:20" class="p-2 text-white bg-zinc-900 shadow rounded">
        <a [routerLink]="['/phim', movie.slug]" class="block cursor-pointer">
          <img
            [src]="'https://img.ophim.live/uploads/movies/' + movie.thumb_url"
            [alt]="movie.name"
            class="w-full h-40 object-cover rounded"
          />
          <div class="p-2">
            <h3 class="text-sm font-semibold truncate">{{ movie.name }}</h3>
            <p class="text-xs text-gray-400 truncate">{{ movie.origin_name }}</p>
          </div>
        </a>
      </div>
    </div>
  </div>
</ng-container>

<ng-template #noResult>
  <p *ngIf="!isLoading" class="text-white">Không tìm thấy phim nào.</p>
</ng-template>
